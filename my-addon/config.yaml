name: "ZP2 integration"
version: "1.0.3"
slug: "zp2_integration"
description: "This Home Assistant add-on listens to MQTT messages and automatically handles
  ZP2 firmware checks, OTA updates, and MQTT Discovery for ZP2 devices.
  It enables seamless integration of ZP2 device data into Home Assistant."
startup: "services"
boot: "auto"
arch:
  - aarch64
  - amd64
  - armv7
# url: "https://github.com/YJ-spec/3DRP_ADDON"
init: false


# 這行才是關鍵：讓你可以打 http://supervisor/core/api
homeassistant_api: true

# 對外開放 8099
# ingress: false
# ports:
#   "8099/tcp": 8099
# ports_description:
#   "8099/tcp": "3DRP HTTP API and Status page"

# 在 Add-on 頁面顯示「Open Web UI」按鈕（連到 /status）
# webui: "http://[HOST]:[PORT:8099]/status"
# panel_icon: "mdi:view-list-outline"

map:
  - share:rw


options:
  mqtt_topics: "+/+/data,+/+/control"
  mqtt_broker: "core-mosquitto"
  mqtt_port: 1883
  mqtt_username: ""
  mqtt_password: ""
  zp2_fw_version: "T251205-S1"
  zp2_fw_url: "https://mjgrd2fw.s3.ap-northeast-1.amazonaws.com/STM32/ZP2/fota-ZP2-5-0-20251205-S01.bin"
  # HA_LONG_LIVED_TOKEN: ""

schema:
  mqtt_topics: str
  mqtt_broker: str
  mqtt_port: int
  mqtt_username: str?
  mqtt_password: str?
  zp2_fw_version: str
  zp2_fw_url: str
  
  # HA_LONG_LIVED_TOKEN: password?
